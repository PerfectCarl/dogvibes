#summary Instructions on how to set up the dogvibes suite

= Introduction =

This project has just started so beware of excessive tweaking.


= Installation details specific to Linux =

These instructions apply for Ubuntu 9.04 and might have to be altered for other distributions. Don't forget to run in a context with appropriate permissions, e.g. sudo ;)

== Dependencies ==

Start with:
`apt-get install cvs subversion git git-core flex bison libglib2.0-dev autoconf libtool libxml2-dev gtk-doc-tools libmp3lame-dev libmad0-dev liboil-dev libasound-dev libdbus-glib-1-dev libexpat1-dev libstdc++6-4.3-dev libsqlite3-dev python-tagpy python-pysqlite3 libid3tag0-dev python-cjson`

=== libspotify ===
  * Download and unpack latest version at http://developer.spotify.com/en/libspotify/overview/
  * Currently its 0.0.3, wget http://developer.spotify.com/download/libspotify/libspotify-0.0.3-linux6-i686.tar.gz (use x86_64 if needed, see the site)
  * tar -xvf libspotify-0.0.1-linux6-x86.tar.gz && cd libspotify-0.0.1-linux6-x86.tar
  * make install prefix=/usr/local
  * ldconfig -v

=== GStreamer ===
  * mkdir src
  * cd src
  * git clone git://anongit.freedesktop.org/gstreamer/gstreamer
  * git clone git://anongit.freedesktop.org/gstreamer/gst-plugins-base
  * git clone git://anongit.freedesktop.org/gstreamer/gst-plugins-good
  * git clone git://anongit.freedesktop.org/gstreamer/gst-plugins-bad
  * git clone git://anongit.freedesktop.org/gstreamer/gst-plugins-ugly
  * git clone git://anongit.freedesktop.org/gstreamer/gst-ffmpeg
  * export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig
  * In each of the checked out folders run:./autogen.sh && make install (there are some deps between the packages, so follow the order in the list above)
  * Test your installation with `gst-launch audiotestsrc ! audioconvert ! alsasink`

=== gst-spot-src ===
  * cd ./gst-spot-src
  * autogen.sh --prefix=/usr/local
  * make install

= Installation details specific to OS X =

== Dependencies ==
  * Install the latest Xcode from Apple
  * Install macports (macports.org)
  * sudo port install py26-gst-python
  * sudo port install py26-cjson
  * sudo port install py26-pil
  * sudo port install libvorbis

=== libopenspotify ===
  * git clone git://github.com/noahwilliamsson/openspotify.git
  * Change the following in openspotify/libopenspotify/Makefile:
{{{
-CFLAGS = -Wall -ggdb -I../include -fPIC -O2
-LDFLAGS = -lcrypto -lresolv -lz -lvorbisfile
+CFLAGS = -Wall -ggdb -I../include -I/opt/local/include -fPIC -O2
+LDFLAGS = -lcrypto -lresolv -lz -lvorbisfile -L/opt/local/lib
}}}
  * sudo make prefix=/opt/local install

=== gst-spot-src ===
  * cd ./gst-spot-src
  * autogen.sh --prefix=/*opt*/local
  * Make sure your path has this order, PATH=/opt/local/bin:/usr/bin:/bin with opt/local first, so we use the newest tools for the job
  * make install

= Start Dogvibes =
  * Change user and pass for Spotify in server.py or use the env variables
  * Start server with `SPOTIFY_USER=dog SPOTIFY_PASSWORD=vibes ./server.py`from the ./dogvibes2/src directory
  * The web server is attached to port 2000